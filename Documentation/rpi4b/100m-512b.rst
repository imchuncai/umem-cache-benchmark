.. SPDX-License-Identifier: BSD-3-Clause
.. Copyright (C) 2025, Shu De Zheng <imchuncai@gmail.com>. All Rights Reserved.

===================
BENCHMARK-100M-512B
===================

CONCLUSION
==========

The test results showed that performance of MEMCACHED and UMEM-CACHE are very
close, they all got very high hit rate and speed. And UMEM-CACHE is at least 70%
faster than REDIS and POGOCACHE, and hit rate is 19% higher.

MEMCACHED
=========
::

	commit 4b9e6198fc44c9eb3ae80802a1b0dcbaf9602969

BUILD COMMAND
-------------
::

	./autogen.sh
	./configure
	make -j

RUN COMMAND
-----------
::

	./memcached --conn-limit=512 --memory-limit=100 --max-item-size=1048576 -t 4 -u root

TEST RESULT
-----------
::

	go test -bench=^BenchmarkMemcached$ -benchtime=3276800x		       \
	-args false 104857600 512 20 80 80 16 [fe80::4038:6954:f1a3:4d0f%end0]
	goos: linux
	goarch: arm64
	pkg: github.com/imchuncai/umem-cache-benchmark
	BenchmarkMemcached-4   	
	=======================================================
	case:  819200    hot:  163840(20%)    hot_access: 80% 
	get: 3276800    hit: 2088863    hit_rate: 63.75% 
	hot: 2621158    hit: 2041692    hit_rate: 77.89% 
	VmHWM:  106644 kB    per_memory_hit_rate: 61.04%
	79.699s
	=======================================================
	3276800	     24322 ns/op	      25166 hit/s/mem
	PASS
	ok  	github.com/imchuncai/umem-cache-benchmark	161.685s

UMEM-CACHE
==========
::

	commit 53f97eb219364fb18e15431e069b2ceef877b5d9

BUILD COMMAND
-------------
::

	make

RUN COMMAND
-----------
::

	./umem-cache 10047

TEST RESULT
-----------
::

	go test -bench=^BenchmarkUmemCache$ -benchtime=3276800x		       \
	-args false 104857600 512 20 80 80 16 [fe80::4038:6954:f1a3:4d0f%end0]
	goos: linux
	goarch: arm64
	pkg: github.com/imchuncai/umem-cache-benchmark
	BenchmarkUmemCache-4   	
	=======================================================
	case:  819200    hot:  163840(20%)    hot_access: 80% 
	get: 3276800    hit: 2033074    hit_rate: 62.04% 
	hot: 2621158    hit: 1977813    hit_rate: 75.46% 
	VmHWM:  103700 kB    per_memory_hit_rate: 61.26%
	78.249s
	=======================================================
	3276800	     23880 ns/op	      25656 hit/s/mem
	PASS
	ok  	github.com/imchuncai/umem-cache-benchmark	157.792s

REDIS
=====
::

	commit e6e0cf5764c99fc1414e46197126e84360536df6

BUILD COMMAND
-------------
::

	make -j

RUN COMMAND
-----------
::

	./src/redis-server --protected-mode no --appendonly no --save ""       \
	--maxmemory 52428800 --maxclients 512 --maxmemory-policy allkeys-lru --port 6379

	./src/redis-server --protected-mode no --appendonly no --save ""       \
	--maxmemory 52428800 --maxclients 512 --maxmemory-policy allkeys-lru --port 6380

TEST RESULT
-----------
::

	go test -bench=^BenchmarkRedis2$ -benchtime=3276800x		       \
	-args false 104857600 512 20 80 80 16 [fe80::4038:6954:f1a3:4d0f%end0]
	goos: linux
	goarch: arm64
	pkg: github.com/imchuncai/umem-cache-benchmark
	BenchmarkRedis2-4   	
	=======================================================
	case:  819200    hot:  163840(20%)    hot_access: 80% 
	get: 3276800    hit: 1922697    hit_rate: 58.68% 
	hot: 2621158    hit: 1870028    hit_rate: 71.34% 
	VmHWM:   60464 kB    per_memory_hit_rate: 49.74%
	VmHWM:   60336 kB
	108.226s
	=======================================================
	3276800	     33028 ns/op	      15060 hit/s/mem
	PASS
	ok  	github.com/imchuncai/umem-cache-benchmark	218.471s

POGOCACHE
=========
::

	commit 71972a9f161d96d91b0f67bfe28897d00bfbd49b

BUILD COMMAND
-------------
::

	make -j NOMIMALLOC=1

RUN COMMAND
-----------
::

	./pogocache --threads=4 --maxmemory=104857600 --maxconns=512	       \
	--port=9401 -h 192.168.101.10

TEST RESULT
-----------
::

	go test -bench=^BenchmarkPogocache$ -benchtime=3276800x		       \
	-args false 104857600 512 20 80 80 16 192.168.101.10
	goos: linux
	goarch: arm64
	pkg: github.com/imchuncai/umem-cache-benchmark
	BenchmarkPogocache-4   	
	=======================================================
	case:  819200    hot:  163840(20%)    hot_access: 80% 
	get: 3276800    hit: 1702793    hit_rate: 51.97% 
	hot: 2621158    hit: 1652123    hit_rate: 63.03% 
	VmHWM:  103744 kB    per_memory_hit_rate: 51.30%
	132.189s
	=======================================================
	3276800	     40341 ns/op	      12714 hit/s/mem
	PASS
	ok  	github.com/imchuncai/umem-cache-benchmark	264.981s
